from ef_norm import telethn as tbot

from telethon import TelegramClient, events
import json
import requests


def staat(qq):
  url = "https://api.telegram.org/bot"+BOTT+"/sendphoto"
  data = {
    "chat_id": str(qq),
    "photo": "https://telegra.ph/file/a23d1886930bd8d9cb0a9.jpg",
    "caption": "‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è‡∑Ä‡∑ö ‡∂ö‡∑ú‡∂ª‡∑ù‡∂±‡∑è ‡∂≠‡∂≠‡∑î ‡∂Ø‡∑ê‡∂± ‡∂ú‡∂±‡∑ä‡∂± ‡∂∏‡∑è‡∑Ä ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂± ‡∂¥‡∑î‡∑Ö‡∑î‡∑Ä‡∂±‡∑ä. \n\n‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑í‡∂∞‡∑è‡∂± üìå \n \n ‚Ä¢ /covid - ‡∂±‡∑Ä‡∂≠‡∂∏ ‡∂ö‡∑ú‡∂ª‡∑ù‡∂±‡∑è ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∑É‡∂Ø‡∑Ñ‡∑è. \n ‚Ä¢ /about - ‡∂∏‡∂∏ ‡∂ú‡∑ê‡∂± ‡∂Ø‡∑ê‡∂± ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏ ‡∑É‡∂Ø‡∑Ñ‡∑è.",
    "parse_mode": "HTML",
    "reply_markup": {
        "inline_keyboard": [
            [
                {
                    "text": " Join Our Group",
                    "url": "https://t.me/slplatform"
                }
            ]
        ]
    }
}
  headers = {'Content-type': 'application/json'}
  r = requests.post(url, data=json.dumps(data), headers=headers)

def staa():
    r = requests.get('https://hpb.health.gov.lk/api/get-current-statistical')
    jsondata = json.loads(r.text)
    update_date_time    = str(jsondata['data']['update_date_time'])
    local_new_cases     = str(jsondata['data']['local_new_cases'])
    local_active_cases  = str(jsondata['data']['local_active_cases'])
    local_total_cases   = str(jsondata['data']['local_total_cases'])
    local_deaths        = str(jsondata['data']['local_deaths'])
    local_recovered     = str(jsondata['data']['local_recovered'])
    local_total_number_of_individuals_in_hospitals = str(jsondata['data']['local_total_number_of_individuals_in_hospitals'])
    global_new_cases    = str(jsondata['data']['global_new_cases'])
    global_total_cases  = str(jsondata['data']['global_total_cases'])
    global_deaths       = str(jsondata['data']['global_deaths'])
    global_new_deaths   = str(jsondata['data']['global_deaths'])
    global_recovered    = str(jsondata['data']['global_recovered'])

    textt = str(
                    '<b>‡∑Ä‡∂≠‡∑ä‡∂∏‡∂≠‡∑ä ‡∂≠‡∂≠‡∑ä‡∂≠‡∑Ä‡∂∫</b>' + '\n' + '\n' + '<b>' +
                    update_date_time + ' ‡∂ß ‡∂∫‡∑è‡∑Ä‡∂≠‡∑ä‡∂ö‡∑è‡∂Ω‡∑ì‡∂± ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑ì. </b>' + '\n' + '\n' +
                    '<b>üá±üá∞ ‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è‡∑Ä‡∑ö ‡∂ö‡∑ú‡∂ª‡∑ù‡∂±‡∑è ‡∂≠‡∂≠‡∑ä‡∑Ä‡∂∫</b>' + '\n' + '\n'  +
                    'ü§í ‡∂≠‡∑Ñ‡∑Ä‡∑î‡∂ª‡∑î ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø ‡∂∏‡∑î‡∑Ö‡∑î ‡∂ª‡∑ù‡∂ú‡∑ì‡∂±‡∑ä ‡∂ú‡∂´‡∂± = ' + '<code>' +
                    local_total_cases + '</code>' + '\n' +
                    'ü§ï ‡∂≠‡∑Ä‡∂∏‡∂≠‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂ö‡∑è‡∂ª ‡∂Ω‡∂∂‡∂± ‡∂ª‡∑ù‡∂ú‡∑ì‡∂±‡∑ä ‡∂ú‡∂´‡∂± = ' + '<code>' + local_active_cases + '</code>' +
                    '\n' + 'üò∑ ‡∂±‡∑Ä ‡∂ª‡∑ù‡∂ú‡∑ì‡∂±‡∑ä ‡∂ú‡∂´‡∂± = ' + '<code>' + local_new_cases + '</code>' +
                    '\n'
                    'üôÇ ‡∂∏‡∑ö ‡∑Ä‡∂± ‡∑Ä‡∑í‡∂ß ‡∑É‡∑î‡∑Ä ‡∑Ä‡∑ñ ‡∂ö‡∑ú‡∂ª‡∑ù‡∂± ‡∂ª‡∑ù‡∂ú‡∑ì‡∂±‡∑ä ‡∂ú‡∂´‡∂± = ' + '<code>' + local_recovered + '</code>' + 
                    '\n' + '‚ö∞ ‡∂∏‡∑î‡∑Ö‡∑î ‡∂∏‡∂ª‡∂´ ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä = ' + '<code>'  + local_deaths + '</code>' + '\n' +
                    '\n' + '<b>üåé ‡∑É‡∂∏‡∑É‡∑ä‡∂≠ ‡∂Ω‡∑ù‡∂ö‡∂∫‡∑ö ‡∂≠‡∂≠‡∑ä‡∑Ä‡∂∫</b>' + '\n' +
                    '\n' + 'ü§í ‡∂≠‡∑Ñ‡∑Ä‡∑î‡∂ª‡∑î ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø ‡∂∏‡∑î‡∑Ö‡∑î ‡∂ª‡∑ù‡∂ú‡∑ì‡∂±‡∑ä ‡∂ú‡∂´‡∂± = ' '<code>'  +
                    global_total_cases + '</code>' + '\n' + 'üò∑ ‡∂±‡∑Ä ‡∂ª‡∑ù‡∂ú‡∑ì‡∂±‡∑ä ‡∂ú‡∂´‡∂± = ' '<code>'  +
                    global_new_cases + '</code>' + '\n' + '‚ö∞ ‡∂∏‡∑î‡∑Ö‡∑î ‡∂∏‡∂ª‡∂´ ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä = ' '<code>'  +
                    global_deaths + '</code>' + '\n' + 'üôÇ ‡∂∏‡∑ö ‡∑Ä‡∂± ‡∑Ä‡∑í‡∂ß ‡∑É‡∑î‡∑Ä ‡∑Ä‡∑ñ ‡∂ö‡∑ú‡∂ª‡∑ù‡∂±‡∑è ‡∂ª‡∑ù‡∂ú‡∑ì‡∂±‡∑ä ‡∂ú‡∂´‡∂± = ' '<code>'  +
                    global_recovered + '</code>' + '\n' + '\n' + '\n' +
                    '‚úÖ ‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∑É‡∑û‡∂õ‡∑ä‚Äç‡∂∫ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∂ª‡∑ä‡∂∞‡∂± ‡∂ö‡∑è‡∂ª‡∑ä‚Äç‡∂∫‡∂Ç‡∑Å‡∂∫‡∑ô‡∂±‡∑ä ‡∂Ω‡∂∂‡∑è ‡∂ú‡∂≠‡∑ä ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∂∫.' + '\n' +
                    '@efbots')
    return textt


@tbot.on(events.NewMessage(pattern='/covid19'))
async def corona(event):
    await event.respond(staa(),parse_mode='html')
    raise events.StopPropagation

def main():
    """Start the bot."""
    bot.run_until_disconnected()

if __name__ == '__main__':
    main()
    
_mod_name__ = " Covid19"

__help__ = """
 ~ /covid19 - corona
"""
